{% extends 'base.html' %}

{% block title %}{{ post.title }} - Frustrated Engineers{% endblock title %}
{% block styles %}
<style>
  .post-image {
    margin-bottom: 20px;
  }
  
  .post-image img {
    max-width: 100%;
    height: auto;
  }
  
  .block-content {
    margin-top: 20px;
  }
  
  .comment {
    margin-bottom: 20px;
    border-bottom: 1px solid #ccc;
    padding-bottom: 20px;
  }
  
  .comment p {
    margin-bottom: 5px;
  }
  
  .comment p:first-child {
    font-weight: bold;
  }
  
  .comment-form {
    margin-top: 20px;
  }
  
  .comment-form textarea {
    width: 100%;
    min-height: 100px;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
    resize: vertical;
  }
  
  .comment-form button {
    margin-top: 10px;
    background-color: #200E49;
    color: #fff;
    padding: 10px 20px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
  }
  
  .comment-form button:hover {
    background-color: #321772;
  }
</style>
{% endblock styles %}
{% block body %}
<main class="page blog-post-detail">
    <section class="clean-block clean-post dark">
        <div class="container">
            <div class="block-content">
                <h2>{{ post.title }}</h2>
                {% if image_url %}
                <div class="post-image">
                    <img src="{{ image_url }}" alt="Blog Post Image">
                </div>
                {% endif %}
                <p>{{ post.content }}</p>
                <p>Author: {{ post.author.username }}</p>
                <p>Categories:
                    {% for category in post.categories.all %}
                        {{ category.name }},
                    {% endfor %}
                </p>
                <p>Tags:
                    {% for tag in post.tags.all %}
                        {{ tag.name }},
                    {% endfor %}
                </p>
            </div>
        </div>
    </section>

    <section class="clean-block clean-post dark">
        <div class="container">
            <div class="block-content">
                <h3>Comments</h3>
                {% for comment in comments %}
                <div class="comment">
                    <p>{{ comment.content }}</p>
                    <p>By {{ comment.author.username }} on {{ comment.created_at }}</p>
                </div>
                {% endfor %}
            </div>
        </div>
    </section>
    
    <section class="clean-block clean-post dark comment-form">
        <div class="container">
            <div class="block-content">
                <h3>Add a Comment</h3>
                <form method="post" action="{% url 'comment_create' post.pk %}">
                    {% csrf_token %}
                    <div class="form-group">
                        <textarea name="content" rows="4" required></textarea>
                    </div>
                    <button type="submit">Submit Comment</button>
                </form>
            </div>
        </div>
    </section>
</main>
{% endblock body %}
